Сложность алгоритма поиска данных сейчас k*n, где k-это глубина, а n-это количество записей.
Для оптимизации можно добавить индекс к полю parent_id(create index idx_ on department(parent_id)),что делает сложность k*log(n)
